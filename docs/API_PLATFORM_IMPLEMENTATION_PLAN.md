# Idol API - API-as-a-Platform å®Ÿè£…è¨ˆç”»

**ä½œæˆæ—¥**: 2025-11-26
**å®Ÿè£…æœŸé–“**: 3ãƒ¶æœˆï¼ˆ2025å¹´12æœˆã€œ2026å¹´2æœˆï¼‰
**ã‚´ãƒ¼ãƒ«**: æ§˜ã€…ãªWebã‚µãƒ¼ãƒ“ã‚¹ãƒ»ã‚¢ãƒ—ãƒªã§åˆ©ç”¨å¯èƒ½ãªåŒ…æ‹¬çš„ã‚¢ã‚¤ãƒ‰ãƒ«æƒ…å ±APIã®æ§‹ç¯‰

---

## ğŸ¯ ãƒ“ã‚¸ãƒ§ãƒ³

ã“ã®APIã‚’åŸºç›¤ã¨ã—ã¦ã€ä»¥ä¸‹ã®ã‚ˆã†ãªå¤šæ§˜ãªWebã‚µãƒ¼ãƒ“ã‚¹ãŒæ§‹ç¯‰ã§ãã‚‹ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã‚’ç›®æŒ‡ã™ï¼š

### æƒ³å®šãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹
1. **ğŸ“š ãƒ•ã‚¡ãƒ³å‘ã‘ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚µã‚¤ãƒˆ**
   - ã‚¢ã‚¤ãƒ‰ãƒ«æ¤œç´¢ãƒ»ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«é–²è¦§
   - ã‚°ãƒ«ãƒ¼ãƒ—æƒ…å ±ãƒ»æ‰€å±ãƒ¡ãƒ³ãƒãƒ¼ç¢ºèª
   - äº‹å‹™æ‰€åˆ¥ã‚¢ã‚¤ãƒ‰ãƒ«ä¸€è¦§

2. **ğŸª ã‚¤ãƒ™ãƒ³ãƒˆãƒ»ãƒ©ã‚¤ãƒ–æƒ…å ±é›†ç´„ã‚µã‚¤ãƒˆ**
   - ã‚¤ãƒ™ãƒ³ãƒˆæ¤œç´¢ãƒ»ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼è¡¨ç¤º
   - å‡ºæ¼”è€…ã‹ã‚‰é€†å¼•ãæ¤œç´¢
   - åœ°åŸŸãƒ»æœŸé–“ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°

3. **ğŸ‘¥ ãƒ•ã‚¡ãƒ³ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£å½¢æˆä¿ƒé€²ã‚µã‚¤ãƒˆ**
   - ãŠæ°—ã«å…¥ã‚Šãƒ»ãƒ•ã‚©ãƒ­ãƒ¼æ©Ÿèƒ½
   - ã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£ãƒ•ã‚£ãƒ¼ãƒ‰
   - ã‚¤ãƒ™ãƒ³ãƒˆãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒ»ã‚³ãƒ¡ãƒ³ãƒˆ

### APIè¨­è¨ˆæ–¹é‡
- **æŸ”è»Ÿæ€§**: è¤‡æ•°æ¡ä»¶ã§ã®æ¤œç´¢ãƒ»ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°å¯¾å¿œ
- **åŠ¹ç‡æ€§**: ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³ã€é–¢é€£ãƒ‡ãƒ¼ã‚¿ä¸€æ‹¬å–å¾—
- **é–‹ç™ºè€…ä½“é¨“**: å……å®Ÿã—ãŸãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã€ä¸€è²«ã—ãŸã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
- **æ‹¡å¼µæ€§**: æ®µéšçš„ãªæ©Ÿèƒ½è¿½åŠ ã€å¾Œæ–¹äº’æ›æ€§ã®ç¶­æŒ

---

## ğŸ“… 3ãƒ¶æœˆã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«æ¦‚è¦

### **Month 1ï¼ˆ12æœˆï¼‰: åŸºç›¤å¼·åŒ–**
- Week 1-2: æ¤œç´¢ãƒ»ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°åŸºç›¤
- Week 3: ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³ + ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
- Week 4: äº‹å‹™æ‰€ï¼ˆAgencyï¼‰ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£

**æˆæœç‰©**: æŸ”è»Ÿãªæ¤œç´¢APIã¨æ§‹é€ åŒ–ã•ã‚ŒãŸãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«

---

### **Month 2ï¼ˆ1æœˆï¼‰: ãƒ‡ãƒ¼ã‚¿æ‹¡å¼µ**
- Week 1-2: ã‚¤ãƒ™ãƒ³ãƒˆ/ãƒ©ã‚¤ãƒ–ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£
- Week 3: ä¼šå ´ï¼ˆVenueï¼‰ç®¡ç†
- Week 4: SNS/å¤–éƒ¨ãƒªãƒ³ã‚¯ç®¡ç†

**æˆæœç‰©**: ã‚¤ãƒ™ãƒ³ãƒˆé›†ç´„ã‚µã‚¤ãƒˆæ§‹ç¯‰å¯èƒ½ãªAPI

---

### **Month 3ï¼ˆ2æœˆï¼‰: é–‹ç™ºè€…ä½“é¨“å‘ä¸Š**
- Week 1-2: OpenAPIä»•æ§˜æ›¸ + Swagger UI
- Week 3: ã‚¿ã‚°ãƒ»ã‚«ãƒ†ã‚´ãƒªã‚·ã‚¹ãƒ†ãƒ 
- Week 4: ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ– + ç·åˆãƒ†ã‚¹ãƒˆ

**æˆæœç‰©**: ãƒ—ãƒ­ãƒ€ã‚¯ã‚·ãƒ§ãƒ³ç’°å¢ƒå¯¾å¿œã®åŒ…æ‹¬çš„API

---

## ğŸ”´ Phase 1: æ¤œç´¢ãƒ»ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°åŸºç›¤ï¼ˆWeek 1-2ï¼‰

### ç›®çš„
ã©ã‚“ãªã‚¢ãƒ—ãƒªã§ã‚‚å¿…é ˆã¨ãªã‚‹ã€Œã‚¢ã‚¤ãƒ‰ãƒ«ã‚’æ¢ã™ã€æ©Ÿèƒ½ã®å®Ÿè£…

### å®Ÿè£…æœŸé–“
**5-7å–¶æ¥­æ—¥**

---

### Task 1.1: ã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿å‡¦ç†åŸºç›¤

**å·¥æ•°**: 2æ—¥
**å„ªå…ˆåº¦**: ğŸ”´ Critical

#### å®Ÿè£…å†…å®¹

##### 1. ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿DTOä½œæˆ
```go
// internal/application/idol/query.go

type ListIdolsQuery struct {
    // æ¤œç´¢æ¡ä»¶
    Name        *string `form:"name"`         // éƒ¨åˆ†ä¸€è‡´æ¤œç´¢
    Nationality *string `form:"nationality"`  // å®Œå…¨ä¸€è‡´
    GroupID     *string `form:"group_id"`     // ã‚°ãƒ«ãƒ¼ãƒ—IDãƒ•ã‚£ãƒ«ã‚¿ãƒ¼
    AgencyID    *string `form:"agency_id"`    // äº‹å‹™æ‰€IDãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ï¼ˆå¾Œã§å®Ÿè£…ï¼‰

    // å¹´é½¢ç¯„å›²
    AgeMin      *int    `form:"age_min"`
    AgeMax      *int    `form:"age_max"`

    // ç”Ÿå¹´æœˆæ—¥ç¯„å›²
    BirthdateFrom *string `form:"birthdate_from"` // YYYY-MM-DD
    BirthdateTo   *string `form:"birthdate_to"`   // YYYY-MM-DD

    // ã‚¿ã‚°ï¼ˆå°†æ¥å®Ÿè£…ï¼‰
    Tags        []string `form:"tags"`

    // ã‚½ãƒ¼ãƒˆ
    Sort        *string `form:"sort"`   // name, birthdate, created_at
    Order       *string `form:"order"`  // asc, desc

    // ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³
    Page        *int    `form:"page"`
    Limit       *int    `form:"limit"`
}

// ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤è¨­å®š
func (q *ListIdolsQuery) ApplyDefaults() {
    if q.Page == nil || *q.Page < 1 {
        defaultPage := 1
        q.Page = &defaultPage
    }
    if q.Limit == nil || *q.Limit < 1 {
        defaultLimit := 20
        q.Limit = &defaultLimit
    }
    if q.Limit != nil && *q.Limit > 100 {
        maxLimit := 100
        q.Limit = &maxLimit
    }
    if q.Sort == nil {
        defaultSort := "created_at"
        q.Sort = &defaultSort
    }
    if q.Order == nil {
        defaultOrder := "desc"
        q.Order = &defaultOrder
    }
}

// ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
func (q *ListIdolsQuery) Validate() error {
    if q.Sort != nil {
        allowedSorts := []string{"name", "birthdate", "created_at"}
        if !contains(allowedSorts, *q.Sort) {
            return errors.New("ç„¡åŠ¹ãªã‚½ãƒ¼ãƒˆé …ç›®ã§ã™")
        }
    }
    if q.Order != nil {
        allowedOrders := []string{"asc", "desc"}
        if !contains(allowedOrders, *q.Order) {
            return errors.New("ç„¡åŠ¹ãªã‚½ãƒ¼ãƒˆé †ã§ã™")
        }
    }
    return nil
}
```

##### 2. ãƒªãƒã‚¸ãƒˆãƒªã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹æ‹¡å¼µ
```go
// internal/domain/idol/repository.go

type SearchCriteria struct {
    Name          *string
    Nationality   *string
    GroupID       *string
    AgeMin        *int
    AgeMax        *int
    BirthdateFrom *time.Time
    BirthdateTo   *time.Time

    Sort  string
    Order string

    Offset int
    Limit  int
}

type Repository interface {
    // æ—¢å­˜ãƒ¡ã‚½ãƒƒãƒ‰
    Save(ctx context.Context, idol *Idol) error
    FindByID(ctx context.Context, id IdolID) (*Idol, error)
    Update(ctx context.Context, idol *Idol) error
    Delete(ctx context.Context, id IdolID) error

    // æ–°è¦è¿½åŠ 
    Search(ctx context.Context, criteria SearchCriteria) ([]*Idol, error)
    Count(ctx context.Context, criteria SearchCriteria) (int64, error)
}
```

##### 3. MongoDBãƒªãƒã‚¸ãƒˆãƒªå®Ÿè£…
```go
// internal/infrastructure/persistence/mongodb/idol_repository.go

func (r *IdolRepository) Search(ctx context.Context, criteria domain.SearchCriteria) ([]*domain.Idol, error) {
    filter := buildMongoFilter(criteria)

    opts := options.Find()

    // ã‚½ãƒ¼ãƒˆè¨­å®š
    sortOrder := 1
    if criteria.Order == "desc" {
        sortOrder = -1
    }
    opts.SetSort(bson.D{{Key: criteria.Sort, Value: sortOrder}})

    // ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³
    opts.SetSkip(int64(criteria.Offset))
    opts.SetLimit(int64(criteria.Limit))

    cursor, err := r.collection.Find(ctx, filter, opts)
    if err != nil {
        return nil, err
    }
    defer cursor.Close(ctx)

    var idols []*domain.Idol
    if err := cursor.All(ctx, &idols); err != nil {
        return nil, err
    }

    return idols, nil
}

func buildMongoFilter(criteria domain.SearchCriteria) bson.M {
    filter := bson.M{}

    // åå‰æ¤œç´¢ï¼ˆéƒ¨åˆ†ä¸€è‡´ï¼‰
    if criteria.Name != nil {
        filter["name"] = bson.M{"$regex": *criteria.Name, "$options": "i"}
    }

    // å›½ç±ï¼ˆå®Œå…¨ä¸€è‡´ï¼‰
    if criteria.Nationality != nil {
        filter["nationality"] = *criteria.Nationality
    }

    // ã‚°ãƒ«ãƒ¼ãƒ—ID
    if criteria.GroupID != nil {
        filter["group_id"] = *criteria.GroupID
    }

    // å¹´é½¢ç¯„å›²ï¼ˆç”Ÿå¹´æœˆæ—¥ã‹ã‚‰é€†ç®—ï¼‰
    if criteria.AgeMin != nil || criteria.AgeMax != nil {
        now := time.Now()
        birthdateFilter := bson.M{}

        if criteria.AgeMax != nil {
            // AgeMaxæ­³ã‚ˆã‚Šè‹¥ã„ â†’ ç”Ÿå¹´æœˆæ—¥ãŒã“ã‚Œã‚ˆã‚Šå¾Œ
            minBirthdate := now.AddDate(-*criteria.AgeMax-1, 0, 0)
            birthdateFilter["$gte"] = minBirthdate
        }
        if criteria.AgeMin != nil {
            // AgeMinæ­³ä»¥ä¸Š â†’ ç”Ÿå¹´æœˆæ—¥ãŒã“ã‚Œã‚ˆã‚Šå‰
            maxBirthdate := now.AddDate(-*criteria.AgeMin, 0, 0)
            birthdateFilter["$lte"] = maxBirthdate
        }

        if len(birthdateFilter) > 0 {
            filter["birthdate"] = birthdateFilter
        }
    }

    // ç”Ÿå¹´æœˆæ—¥ç¯„å›²
    if criteria.BirthdateFrom != nil || criteria.BirthdateTo != nil {
        birthdateFilter := bson.M{}
        if criteria.BirthdateFrom != nil {
            birthdateFilter["$gte"] = *criteria.BirthdateFrom
        }
        if criteria.BirthdateTo != nil {
            birthdateFilter["$lte"] = *criteria.BirthdateTo
        }
        filter["birthdate"] = birthdateFilter
    }

    return filter
}

func (r *IdolRepository) Count(ctx context.Context, criteria domain.SearchCriteria) (int64, error) {
    filter := buildMongoFilter(criteria)
    return r.collection.CountDocuments(ctx, filter)
}
```

#### å®Œäº†æ¡ä»¶
- âœ… è¤‡æ•°æ¡ä»¶ã§ã®æ¤œç´¢ãŒå‹•ä½œ
- âœ… ã‚½ãƒ¼ãƒˆæ©Ÿèƒ½ãŒæ­£å¸¸å‹•ä½œ
- âœ… MongoDBã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã®ä½œæˆ

#### ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹
```go
func TestSearchIdols(t *testing.T) {
    tests := []struct {
        name     string
        criteria domain.SearchCriteria
        want     int
    }{
        {
            name: "åå‰æ¤œç´¢",
            criteria: domain.SearchCriteria{
                Name: stringPtr("å±±ç”°"),
            },
            want: 2,
        },
        {
            name: "å¹´é½¢ç¯„å›²",
            criteria: domain.SearchCriteria{
                AgeMin: intPtr(20),
                AgeMax: intPtr(30),
            },
            want: 5,
        },
    }
    // ...
}
```

---

### Task 1.2: ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ãƒ»ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆå®Ÿè£…

**å·¥æ•°**: 1æ—¥
**å„ªå…ˆåº¦**: ğŸ”´ Critical

#### ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆä»•æ§˜

```
GET /api/v1/idols?name=å±±ç”°&nationality=æ—¥æœ¬&sort=birthdate&order=desc&page=1&limit=20
```

**ã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿:**
- `name`: åå‰ï¼ˆéƒ¨åˆ†ä¸€è‡´ï¼‰
- `nationality`: å›½ç±ï¼ˆå®Œå…¨ä¸€è‡´ï¼‰
- `group_id`: ã‚°ãƒ«ãƒ¼ãƒ—ID
- `age_min`, `age_max`: å¹´é½¢ç¯„å›²
- `birthdate_from`, `birthdate_to`: ç”Ÿå¹´æœˆæ—¥ç¯„å›²ï¼ˆYYYY-MM-DDï¼‰
- `sort`: ã‚½ãƒ¼ãƒˆé …ç›®ï¼ˆname, birthdate, created_atï¼‰
- `order`: ã‚½ãƒ¼ãƒˆé †ï¼ˆasc, descï¼‰
- `page`: ãƒšãƒ¼ã‚¸ç•ªå·ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 1ï¼‰
- `limit`: 1ãƒšãƒ¼ã‚¸ã‚ãŸã‚Šã®ä»¶æ•°ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 20ã€æœ€å¤§: 100ï¼‰

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹ä¾‹:**
```json
{
  "data": [
    {
      "id": "507f1f77bcf86cd799439011",
      "name": "å±±ç”°èŠ±å­",
      "group": "Sample Group",
      "group_id": "507f1f77bcf86cd799439012",
      "birthdate": "2000-05-15",
      "age": 24,
      "nationality": "æ—¥æœ¬",
      "image_url": "https://example.com/image.jpg",
      "created_at": "2025-11-15T10:00:00Z",
      "updated_at": "2025-11-15T10:00:00Z"
    }
  ],
  "meta": {
    "total": 150,
    "page": 1,
    "per_page": 20,
    "total_pages": 8,
    "has_next": true,
    "has_prev": false
  },
  "links": {
    "first": "/api/v1/idols?page=1",
    "prev": null,
    "next": "/api/v1/idols?page=2",
    "last": "/api/v1/idols?page=8"
  }
}
```

#### å®Ÿè£…
```go
// internal/interface/handlers/idol_handler.go

func (h *IdolHandler) ListIdols(c *gin.Context) {
    var query idol.ListIdolsQuery
    if err := c.ShouldBindQuery(&query); err != nil {
        c.JSON(400, gin.H{"error": "ç„¡åŠ¹ãªã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã§ã™"})
        return
    }

    query.ApplyDefaults()
    if err := query.Validate(); err != nil {
        c.JSON(400, gin.H{"error": err.Error()})
        return
    }

    result, err := h.service.SearchIdols(c.Request.Context(), query)
    if err != nil {
        c.JSON(500, gin.H{"error": "æ¤œç´¢ã«å¤±æ•—ã—ã¾ã—ãŸ"})
        return
    }

    c.JSON(200, result)
}
```

#### å®Œäº†æ¡ä»¶
- âœ… ã™ã¹ã¦ã®ã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãŒå‹•ä½œ
- âœ… ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ãŒé©åˆ‡
- âœ… APIãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä½œæˆ

---

### Task 1.3: MongoDBã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ä½œæˆ

**å·¥æ•°**: 0.5æ—¥
**å„ªå…ˆåº¦**: ğŸŸ¡ High

#### å®Ÿè£…å†…å®¹

```go
// internal/infrastructure/persistence/mongodb/idol_repository.go

func (r *IdolRepository) EnsureIndexes(ctx context.Context) error {
    indexes := []mongo.IndexModel{
        {
            Keys: bson.D{
                {Key: "name", Value: 1},
            },
        },
        {
            Keys: bson.D{
                {Key: "nationality", Value: 1},
            },
        },
        {
            Keys: bson.D{
                {Key: "group_id", Value: 1},
            },
        },
        {
            Keys: bson.D{
                {Key: "birthdate", Value: 1},
            },
        },
        {
            Keys: bson.D{
                {Key: "created_at", Value: -1},
            },
        },
        // è¤‡åˆã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹
        {
            Keys: bson.D{
                {Key: "nationality", Value: 1},
                {Key: "birthdate", Value: 1},
            },
        },
    }

    _, err := r.collection.Indexes().CreateMany(ctx, indexes)
    return err
}
```

#### å®Œäº†æ¡ä»¶
- âœ… ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ãŒä½œæˆã•ã‚Œã‚‹
- âœ… æ¤œç´¢ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãŒå‘ä¸Š

---

## ğŸŸ¡ Phase 2: ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³ + ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ï¼ˆWeek 3ï¼‰

### ç›®çš„
å¤§é‡ãƒ‡ãƒ¼ã‚¿å¯¾å¿œã¨é–‹ç™ºè€…ä½“é¨“ã®å‘ä¸Š

### å®Ÿè£…æœŸé–“
**2-3å–¶æ¥­æ—¥**

---

### Task 2.1: ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³ãƒ­ã‚¸ãƒƒã‚¯å®Ÿè£…

**å·¥æ•°**: 1æ—¥
**å„ªå…ˆåº¦**: ğŸ”´ Critical

#### å®Ÿè£…å†…å®¹

##### 1. ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³è¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯
```go
// internal/application/idol/pagination.go

type PaginationMeta struct {
    Total      int64  `json:"total"`
    Page       int    `json:"page"`
    PerPage    int    `json:"per_page"`
    TotalPages int    `json:"total_pages"`
    HasNext    bool   `json:"has_next"`
    HasPrev    bool   `json:"has_prev"`
}

type PaginationLinks struct {
    First string  `json:"first"`
    Prev  *string `json:"prev"`
    Next  *string `json:"next"`
    Last  string  `json:"last"`
}

func CalculatePagination(total int64, page, perPage int, baseURL string) (PaginationMeta, PaginationLinks) {
    totalPages := int((total + int64(perPage) - 1) / int64(perPage))

    meta := PaginationMeta{
        Total:      total,
        Page:       page,
        PerPage:    perPage,
        TotalPages: totalPages,
        HasNext:    page < totalPages,
        HasPrev:    page > 1,
    }

    links := PaginationLinks{
        First: fmt.Sprintf("%s?page=1", baseURL),
        Last:  fmt.Sprintf("%s?page=%d", baseURL, totalPages),
    }

    if meta.HasNext {
        next := fmt.Sprintf("%s?page=%d", baseURL, page+1)
        links.Next = &next
    }

    if meta.HasPrev {
        prev := fmt.Sprintf("%s?page=%d", baseURL, page-1)
        links.Prev = &prev
    }

    return meta, links
}
```

##### 2. ApplicationServiceæ‹¡å¼µ
```go
// internal/application/idol/service.go

type SearchIdolsResult struct {
    Data  []IdolDTO       `json:"data"`
    Meta  PaginationMeta  `json:"meta"`
    Links PaginationLinks `json:"links"`
}

func (s *ApplicationService) SearchIdols(ctx context.Context, query ListIdolsQuery) (*SearchIdolsResult, error) {
    // SearchCriteriaã«å¤‰æ›
    criteria := domain.SearchCriteria{
        Name:        query.Name,
        Nationality: query.Nationality,
        GroupID:     query.GroupID,
        AgeMin:      query.AgeMin,
        AgeMax:      query.AgeMax,
        Sort:        *query.Sort,
        Order:       *query.Order,
        Offset:      (*query.Page - 1) * *query.Limit,
        Limit:       *query.Limit,
    }

    // ä¸¦è¡Œå‡¦ç†: ãƒ‡ãƒ¼ã‚¿å–å¾—ã¨ä»¶æ•°å–å¾—
    var idols []*domain.Idol
    var total int64
    var errData, errCount error

    var wg sync.WaitGroup
    wg.Add(2)

    go func() {
        defer wg.Done()
        idols, errData = s.repo.Search(ctx, criteria)
    }()

    go func() {
        defer wg.Done()
        total, errCount = s.repo.Count(ctx, criteria)
    }()

    wg.Wait()

    if errData != nil {
        return nil, errData
    }
    if errCount != nil {
        return nil, errCount
    }

    // DTOã«å¤‰æ›
    dtos := make([]IdolDTO, len(idols))
    for i, idol := range idols {
        dtos[i] = s.toDTO(idol)
    }

    // ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³è¨ˆç®—
    baseURL := "/api/v1/idols" // TODO: ã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’å«ã‚ã‚‹
    meta, links := CalculatePagination(total, *query.Page, *query.Limit, baseURL)

    return &SearchIdolsResult{
        Data:  dtos,
        Meta:  meta,
        Links: links,
    }, nil
}
```

#### å®Œäº†æ¡ä»¶
- âœ… ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³ãŒæ­£ç¢ºã«å‹•ä½œ
- âœ… ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ãŒæ­£ã—ãè¨ˆç®—ã•ã‚Œã‚‹
- âœ… ãƒªãƒ³ã‚¯ãŒæ­£ã—ãç”Ÿæˆã•ã‚Œã‚‹

---

### Task 2.2: ã‚«ãƒ¼ã‚½ãƒ«ãƒ™ãƒ¼ã‚¹ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰

**å·¥æ•°**: 1æ—¥
**å„ªå…ˆåº¦**: ğŸŸ¢ Low

#### æ¦‚è¦
å¤§è¦æ¨¡ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆå‘ã‘ã®ã‚«ãƒ¼ã‚½ãƒ«ãƒ™ãƒ¼ã‚¹ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè£…ï¼ˆå°†æ¥çš„ã«è¿½åŠ ï¼‰

```
GET /api/v1/idols?cursor=eyJpZCI6IjUwN2YxZjc3In0&limit=20
```

**å®Ÿè£…ã¯å¾Œå›ã—** - ã‚ªãƒ•ã‚»ãƒƒãƒˆãƒ™ãƒ¼ã‚¹ã§ååˆ†ãªæ®µéš

---

## ğŸŸ¢ Phase 3: äº‹å‹™æ‰€ï¼ˆAgencyï¼‰ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ï¼ˆWeek 4ï¼‰

### ç›®çš„
ãƒ‡ãƒ¼ã‚¿ã®æ§‹é€ åŒ–ã¨ä»˜åŠ ä¾¡å€¤å‘ä¸Š

### å®Ÿè£…æœŸé–“
**3-4å–¶æ¥­æ—¥**

---

### Task 3.1: Agencyãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ¢ãƒ‡ãƒ«ä½œæˆ

**å·¥æ•°**: 1æ—¥
**å„ªå…ˆåº¦**: ğŸ”´ Critical

#### ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ 
```
internal/
â”œâ”€â”€ domain/
â”‚   â””â”€â”€ agency/
â”‚       â”œâ”€â”€ value_object.go
â”‚       â”œâ”€â”€ agency.go
â”‚       â”œâ”€â”€ repository.go
â”‚       â””â”€â”€ service.go
â”œâ”€â”€ application/
â”‚   â””â”€â”€ agency/
â”‚       â”œâ”€â”€ command.go
â”‚       â”œâ”€â”€ query.go
â”‚       â””â”€â”€ service.go
â”œâ”€â”€ infrastructure/
â”‚   â””â”€â”€ persistence/
â”‚       â””â”€â”€ mongodb/
â”‚           â””â”€â”€ agency_repository.go
â””â”€â”€ interface/
    â””â”€â”€ handlers/
        â””â”€â”€ agency_handler.go
```

#### ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ¢ãƒ‡ãƒ«

##### 1. å€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
```go
// internal/domain/agency/value_object.go

type AgencyID struct {
    value string
}

func NewAgencyID(value string) (AgencyID, error) {
    if value == "" {
        return AgencyID{}, errors.New("äº‹å‹™æ‰€IDã¯ç©ºã«ã§ãã¾ã›ã‚“")
    }
    return AgencyID{value: value}, nil
}

func (id AgencyID) Value() string {
    return id.value
}

type AgencyName struct {
    value string
}

func NewAgencyName(value string) (AgencyName, error) {
    trimmed := strings.TrimSpace(value)
    if trimmed == "" {
        return AgencyName{}, errors.New("äº‹å‹™æ‰€åã¯ç©ºã«ã§ãã¾ã›ã‚“")
    }
    if len(trimmed) > 200 {
        return AgencyName{}, errors.New("äº‹å‹™æ‰€åã¯200æ–‡å­—ä»¥å†…ã«ã—ã¦ãã ã•ã„")
    }
    return AgencyName{value: trimmed}, nil
}

func (n AgencyName) Value() string {
    return n.value
}

type Country struct {
    value string
}

func NewCountry(value string) (Country, error) {
    if value == "" {
        return Country{}, errors.New("å›½ã¯ç©ºã«ã§ãã¾ã›ã‚“")
    }
    validCountries := []string{"æ—¥æœ¬", "éŸ“å›½", "ä¸­å›½", "å°æ¹¾", "ã‚¢ãƒ¡ãƒªã‚«", "ãã®ä»–"}
    if !contains(validCountries, value) {
        return Country{}, errors.New("ç„¡åŠ¹ãªå›½ã§ã™")
    }
    return Country{value: value}, nil
}

func (c Country) Value() string {
    return c.value
}
```

##### 2. ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£
```go
// internal/domain/agency/agency.go

type Agency struct {
    id              AgencyID
    name            AgencyName
    nameEn          *string      // è‹±èªåï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
    foundedDate     *time.Time   // è¨­ç«‹æ—¥ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
    country         Country
    officialWebsite *string      // å…¬å¼ã‚µã‚¤ãƒˆURL
    description     *string      // èª¬æ˜
    logoURL         *string      // ãƒ­ã‚´ç”»åƒURL
    createdAt       time.Time
    updatedAt       time.Time
}

func NewAgency(
    id AgencyID,
    name AgencyName,
    country Country,
) *Agency {
    now := time.Now()
    return &Agency{
        id:        id,
        name:      name,
        country:   country,
        createdAt: now,
        updatedAt: now,
    }
}

// Getters
func (a *Agency) ID() AgencyID           { return a.id }
func (a *Agency) Name() AgencyName       { return a.name }
func (a *Agency) NameEn() *string        { return a.nameEn }
func (a *Agency) FoundedDate() *time.Time { return a.foundedDate }
func (a *Agency) Country() Country       { return a.country }
func (a *Agency) OfficialWebsite() *string { return a.officialWebsite }
func (a *Agency) Description() *string   { return a.description }
func (a *Agency) LogoURL() *string       { return a.logoURL }
func (a *Agency) CreatedAt() time.Time   { return a.createdAt }
func (a *Agency) UpdatedAt() time.Time   { return a.updatedAt }

// ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯
func (a *Agency) UpdateDetails(
    name *AgencyName,
    nameEn *string,
    foundedDate *time.Time,
    officialWebsite *string,
    description *string,
    logoURL *string,
) {
    if name != nil {
        a.name = *name
    }
    a.nameEn = nameEn
    a.foundedDate = foundedDate
    a.officialWebsite = officialWebsite
    a.description = description
    a.logoURL = logoURL
    a.updatedAt = time.Now()
}
```

##### 3. ãƒªãƒã‚¸ãƒˆãƒªã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹
```go
// internal/domain/agency/repository.go

type Repository interface {
    Save(ctx context.Context, agency *Agency) error
    FindByID(ctx context.Context, id AgencyID) (*Agency, error)
    FindAll(ctx context.Context) ([]*Agency, error)
    Update(ctx context.Context, agency *Agency) error
    Delete(ctx context.Context, id AgencyID) error
    ExistsByID(ctx context.Context, id AgencyID) (bool, error)
}
```

#### å®Œäº†æ¡ä»¶
- âœ… Agencyãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ¢ãƒ‡ãƒ«ãŒå®Œæˆ
- âœ… ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãŒæ­£å¸¸å‹•ä½œ
- âœ… ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆä½œæˆ

---

### Task 3.2: Idolã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã¸ã®é–¢é€£ä»˜ã‘

**å·¥æ•°**: 0.5æ—¥
**å„ªå…ˆåº¦**: ğŸ”´ Critical

#### å®Ÿè£…å†…å®¹

##### Idolã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã®ä¿®æ­£
```go
// internal/domain/idol/idol.go

type Idol struct {
    // ... æ—¢å­˜ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰

    // è¿½åŠ 
    agencyID *agency.AgencyID  // äº‹å‹™æ‰€IDï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
}

func NewIdol(
    id IdolID,
    name IdolName,
    nationality Nationality,
    agencyID *agency.AgencyID,  // è¿½åŠ 
) *Idol {
    // ...
}

func (i *Idol) AgencyID() *agency.AgencyID {
    return i.agencyID
}

func (i *Idol) AssignToAgency(agencyID agency.AgencyID) {
    i.agencyID = &agencyID
    i.updatedAt = time.Now()
}

func (i *Idol) RemoveFromAgency() {
    i.agencyID = nil
    i.updatedAt = time.Now()
}
```

##### ãƒªãƒã‚¸ãƒˆãƒªãƒ¡ã‚½ãƒƒãƒ‰è¿½åŠ 
```go
// internal/domain/idol/repository.go

type Repository interface {
    // ... æ—¢å­˜ãƒ¡ã‚½ãƒƒãƒ‰

    // è¿½åŠ 
    FindByAgencyID(ctx context.Context, agencyID agency.AgencyID) ([]*Idol, error)
}
```

#### å®Œäº†æ¡ä»¶
- âœ… Idolã¨AgencyãŒé–¢é€£ä»˜ã‘ã‚‰ã‚Œã‚‹
- âœ… äº‹å‹™æ‰€ã‹ã‚‰ã‚¢ã‚¤ãƒ‰ãƒ«ä¸€è¦§ã‚’å–å¾—ã§ãã‚‹

---

### Task 3.3: Agency APIå®Ÿè£…

**å·¥æ•°**: 1æ—¥
**å„ªå…ˆåº¦**: ğŸŸ¡ High

#### ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ

```
POST   /api/v1/agencies         # äº‹å‹™æ‰€ä½œæˆ
GET    /api/v1/agencies         # äº‹å‹™æ‰€ä¸€è¦§
GET    /api/v1/agencies/:id     # äº‹å‹™æ‰€è©³ç´°
PUT    /api/v1/agencies/:id     # äº‹å‹™æ‰€æ›´æ–°
DELETE /api/v1/agencies/:id     # äº‹å‹™æ‰€å‰Šé™¤

# é–¢é€£ãƒ‡ãƒ¼ã‚¿å–å¾—
GET    /api/v1/agencies/:id?include=idols,groups
GET    /api/v1/agencies/:id/idols    # äº‹å‹™æ‰€æ‰€å±ã‚¢ã‚¤ãƒ‰ãƒ«
```

#### ãƒªã‚¯ã‚¨ã‚¹ãƒˆ/ãƒ¬ã‚¹ãƒãƒ³ã‚¹ä¾‹

**POST /api/v1/agencies**
```json
{
  "name": "ABCäº‹å‹™æ‰€",
  "name_en": "ABC Agency",
  "founded_date": "2015-04-01",
  "country": "æ—¥æœ¬",
  "official_website": "https://abc-agency.com",
  "description": "ã‚¢ã‚¤ãƒ‰ãƒ«è‚²æˆã«ç‰¹åŒ–ã—ãŸäº‹å‹™æ‰€",
  "logo_url": "https://example.com/logo.png"
}
```

**GET /api/v1/agencies/:id?include=idols**
```json
{
  "id": "507f1f77bcf86cd799439011",
  "name": "ABCäº‹å‹™æ‰€",
  "name_en": "ABC Agency",
  "founded_date": "2015-04-01",
  "country": "æ—¥æœ¬",
  "official_website": "https://abc-agency.com",
  "description": "ã‚¢ã‚¤ãƒ‰ãƒ«è‚²æˆã«ç‰¹åŒ–ã—ãŸäº‹å‹™æ‰€",
  "logo_url": "https://example.com/logo.png",
  "idols": [
    {
      "id": "...",
      "name": "å±±ç”°èŠ±å­"
    }
  ],
  "created_at": "2025-11-15T10:00:00Z",
  "updated_at": "2025-11-15T10:00:00Z"
}
```

#### å®Œäº†æ¡ä»¶
- âœ… å…¨ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆãŒå‹•ä½œ
- âœ… é–¢é€£ãƒ‡ãƒ¼ã‚¿ã®å–å¾—ãŒå¯èƒ½
- âœ… APIãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ›´æ–°

---

### Task 3.4: include ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿å®Ÿè£…

**å·¥æ•°**: 1æ—¥
**å„ªå…ˆåº¦**: ğŸŸ¡ Medium

#### å®Ÿè£…å†…å®¹

##### ã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿å‡¦ç†
```go
// internal/application/idol/query.go

type GetIdolQuery struct {
    ID      string   `uri:"id" binding:"required"`
    Include []string `form:"include"` // agency, group, social_links
}

type ListIdolsQuery struct {
    // ... æ—¢å­˜ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰

    Include []string `form:"include"` // agency, group
}
```

##### ApplicationServiceå®Ÿè£…
```go
// internal/application/idol/service.go

func (s *ApplicationService) GetIdol(ctx context.Context, query GetIdolQuery) (*IdolDetailDTO, error) {
    id, err := idol.NewIdolID(query.ID)
    if err != nil {
        return nil, err
    }

    i, err := s.repo.FindByID(ctx, id)
    if err != nil {
        return nil, err
    }

    dto := s.toDetailDTO(i)

    // include ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿å‡¦ç†
    for _, include := range query.Include {
        switch include {
        case "agency":
            if i.AgencyID() != nil {
                agency, err := s.agencyRepo.FindByID(ctx, *i.AgencyID())
                if err == nil {
                    dto.Agency = s.agencyToDTO(agency)
                }
            }
        case "group":
            if i.GroupID() != nil {
                group, err := s.groupRepo.FindByID(ctx, *i.GroupID())
                if err == nil {
                    dto.Group = s.groupToDTO(group)
                }
            }
        }
    }

    return dto, nil
}
```

##### DTOå®šç¾©
```go
// internal/application/idol/query.go

type IdolDetailDTO struct {
    IdolDTO

    // é–¢é€£ãƒ‡ãƒ¼ã‚¿ï¼ˆincludeã§å–å¾—ï¼‰
    Agency      *AgencyDTO      `json:"agency,omitempty"`
    Group       *GroupDTO       `json:"group,omitempty"`
    SocialLinks *SocialLinksDTO `json:"social_links,omitempty"`
}
```

#### å®Œäº†æ¡ä»¶
- âœ… include ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãŒå‹•ä½œ
- âœ… N+1å•é¡ŒãŒç™ºç”Ÿã—ãªã„
- âœ… ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆå®Ÿæ–½

---

## ğŸª Phase 4: ã‚¤ãƒ™ãƒ³ãƒˆ/ãƒ©ã‚¤ãƒ–ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ï¼ˆMonth 2, Week 1-2ï¼‰

### ç›®çš„
ã‚¤ãƒ™ãƒ³ãƒˆé›†ç´„ã‚µã‚¤ãƒˆæ§‹ç¯‰ã‚’å¯èƒ½ã«ã™ã‚‹

### å®Ÿè£…æœŸé–“
**7-10å–¶æ¥­æ—¥**

---

### Task 4.1: Eventãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ¢ãƒ‡ãƒ«ä½œæˆ

**å·¥æ•°**: 2æ—¥
**å„ªå…ˆåº¦**: ğŸ”´ Critical

#### ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ¢ãƒ‡ãƒ«

##### å€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
```go
// internal/domain/event/value_object.go

type EventID struct {
    value string
}

type EventTitle struct {
    value string
}

type EventType struct {
    value string
}

const (
    EventTypeLive        = "live"
    EventTypeHandshake   = "handshake"
    EventTypeRelease     = "release"
    EventTypeFanMeeting  = "fan_meeting"
    EventTypeOnline      = "online"
)

func NewEventType(value string) (EventType, error) {
    validTypes := []string{
        EventTypeLive,
        EventTypeHandshake,
        EventTypeRelease,
        EventTypeFanMeeting,
        EventTypeOnline,
    }
    if !contains(validTypes, value) {
        return EventType{}, errors.New("ç„¡åŠ¹ãªã‚¤ãƒ™ãƒ³ãƒˆã‚¿ã‚¤ãƒ—ã§ã™")
    }
    return EventType{value: value}, nil
}
```

##### ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£
```go
// internal/domain/event/event.go

type Event struct {
    id            EventID
    title         EventTitle
    eventType     EventType
    startDateTime time.Time
    endDateTime   *time.Time      // ã‚ªãƒ—ã‚·ãƒ§ãƒ³
    venueID       *venue.VenueID  // ä¼šå ´ID
    performerIDs  []string        // ã‚¢ã‚¤ãƒ‰ãƒ«ã¾ãŸã¯ã‚°ãƒ«ãƒ¼ãƒ—ã®ID
    ticketURL     *string
    officialURL   *string
    description   *string
    tags          []string
    createdAt     time.Time
    updatedAt     time.Time
}

func NewEvent(
    id EventID,
    title EventTitle,
    eventType EventType,
    startDateTime time.Time,
) *Event {
    now := time.Now()
    return &Event{
        id:            id,
        title:         title,
        eventType:     eventType,
        startDateTime: startDateTime,
        performerIDs:  []string{},
        tags:          []string{},
        createdAt:     now,
        updatedAt:     now,
    }
}

// ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯
func (e *Event) AddPerformer(performerID string) error {
    // é‡è¤‡ãƒã‚§ãƒƒã‚¯
    for _, id := range e.performerIDs {
        if id == performerID {
            return errors.New("æ—¢ã«è¿½åŠ ã•ã‚Œã¦ã„ã¾ã™")
        }
    }
    e.performerIDs = append(e.performerIDs, performerID)
    e.updatedAt = time.Now()
    return nil
}

func (e *Event) RemovePerformer(performerID string) {
    for i, id := range e.performerIDs {
        if id == performerID {
            e.performerIDs = append(e.performerIDs[:i], e.performerIDs[i+1:]...)
            break
        }
    }
    e.updatedAt = time.Now()
}

func (e *Event) IsUpcoming() bool {
    return e.startDateTime.After(time.Now())
}

func (e *Event) IsPast() bool {
    if e.endDateTime != nil {
        return e.endDateTime.Before(time.Now())
    }
    return e.startDateTime.Before(time.Now())
}
```

##### ãƒªãƒã‚¸ãƒˆãƒªã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹
```go
// internal/domain/event/repository.go

type SearchCriteria struct {
    EventType     *EventType
    StartDateFrom *time.Time
    StartDateTo   *time.Time
    VenueID       *venue.VenueID
    PerformerID   *string
    Tags          []string
    Prefecture    *string  // ä¼šå ´ã®éƒ½é“åºœçœŒ

    Sort   string
    Order  string
    Offset int
    Limit  int
}

type Repository interface {
    Save(ctx context.Context, event *Event) error
    FindByID(ctx context.Context, id EventID) (*Event, error)
    Search(ctx context.Context, criteria SearchCriteria) ([]*Event, error)
    Count(ctx context.Context, criteria SearchCriteria) (int64, error)
    Update(ctx context.Context, event *Event) error
    Delete(ctx context.Context, id EventID) error

    // ä¾¿åˆ©ãƒ¡ã‚½ãƒƒãƒ‰
    FindUpcoming(ctx context.Context, limit int) ([]*Event, error)
    FindByPerformer(ctx context.Context, performerID string, limit int) ([]*Event, error)
}
```

#### å®Œäº†æ¡ä»¶
- âœ… Eventãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ¢ãƒ‡ãƒ«ãŒå®Œæˆ
- âœ… ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ãŒæ­£å¸¸å‹•ä½œ
- âœ… ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆä½œæˆ

---

### Task 4.2: Venueãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ¢ãƒ‡ãƒ«ä½œæˆ

**å·¥æ•°**: 1æ—¥
**å„ªå…ˆåº¦**: ğŸŸ¡ High

#### ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ¢ãƒ‡ãƒ«

```go
// internal/domain/venue/venue.go

type Venue struct {
    id         VenueID
    name       VenueName
    address    string
    prefecture Prefecture  // éƒ½é“åºœçœŒ
    city       string
    latitude   *float64
    longitude  *float64
    capacity   *int
    createdAt  time.Time
    updatedAt  time.Time
}

type Prefecture struct {
    value string
}

const (
    PrefectureTokyo   = "æ±äº¬éƒ½"
    PrefectureOsaka   = "å¤§é˜ªåºœ"
    // ... 47éƒ½é“åºœçœŒ
)

func NewPrefecture(value string) (Prefecture, error) {
    validPrefectures := getValidPrefectures()
    if !contains(validPrefectures, value) {
        return Prefecture{}, errors.New("ç„¡åŠ¹ãªéƒ½é“åºœçœŒã§ã™")
    }
    return Prefecture{value: value}, nil
}
```

#### å®Œäº†æ¡ä»¶
- âœ… Venueãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ¢ãƒ‡ãƒ«ãŒå®Œæˆ
- âœ… ãƒªãƒã‚¸ãƒˆãƒªå®Ÿè£…å®Œäº†

---

### Task 4.3: Event APIå®Ÿè£…

**å·¥æ•°**: 2æ—¥
**å„ªå…ˆåº¦**: ğŸ”´ Critical

#### ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ

```
POST   /api/v1/events                  # ã‚¤ãƒ™ãƒ³ãƒˆä½œæˆ
GET    /api/v1/events                  # ã‚¤ãƒ™ãƒ³ãƒˆæ¤œç´¢
GET    /api/v1/events/:id              # ã‚¤ãƒ™ãƒ³ãƒˆè©³ç´°
PUT    /api/v1/events/:id              # ã‚¤ãƒ™ãƒ³ãƒˆæ›´æ–°
DELETE /api/v1/events/:id              # ã‚¤ãƒ™ãƒ³ãƒˆå‰Šé™¤

# æ¤œç´¢ãƒ»ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
GET    /api/v1/events?type=live&start_date_from=2025-12-01&prefecture=æ±äº¬éƒ½
GET    /api/v1/events?performer_id=xxx

# ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼
GET    /api/v1/events/calendar?year=2025&month=12

# ã‚¢ã‚¤ãƒ‰ãƒ«/ã‚°ãƒ«ãƒ¼ãƒ—ã®ã‚¤ãƒ™ãƒ³ãƒˆ
GET    /api/v1/idols/:id/events
GET    /api/v1/groups/:id/events
```

#### ãƒªã‚¯ã‚¨ã‚¹ãƒˆ/ãƒ¬ã‚¹ãƒãƒ³ã‚¹ä¾‹

**POST /api/v1/events**
```json
{
  "title": "Sample Group ãƒ¯ãƒ³ãƒãƒ³ãƒ©ã‚¤ãƒ–",
  "type": "live",
  "start_datetime": "2025-12-15T18:00:00+09:00",
  "end_datetime": "2025-12-15T21:00:00+09:00",
  "venue_id": "507f1f77bcf86cd799439011",
  "performer_ids": ["idol_xxx", "group_yyy"],
  "ticket_url": "https://example.com/tickets",
  "official_url": "https://example.com/event",
  "description": "å¾…æœ›ã®ãƒ¯ãƒ³ãƒãƒ³ãƒ©ã‚¤ãƒ–ï¼",
  "tags": ["ãƒ¯ãƒ³ãƒãƒ³ãƒ©ã‚¤ãƒ–", "å…¨å›½ãƒ„ã‚¢ãƒ¼"]
}
```

**GET /api/v1/events?start_date_from=2025-12-01&prefecture=æ±äº¬éƒ½**
```json
{
  "data": [
    {
      "id": "event_123",
      "title": "Sample Group ãƒ¯ãƒ³ãƒãƒ³ãƒ©ã‚¤ãƒ–",
      "type": "live",
      "start_datetime": "2025-12-15T18:00:00+09:00",
      "end_datetime": "2025-12-15T21:00:00+09:00",
      "venue": {
        "id": "venue_xxx",
        "name": "æ±äº¬ãƒ‰ãƒ¼ãƒ ",
        "prefecture": "æ±äº¬éƒ½",
        "city": "æ–‡äº¬åŒº"
      },
      "performers": [
        {
          "id": "group_yyy",
          "type": "group",
          "name": "Sample Group"
        }
      ],
      "ticket_url": "https://example.com/tickets",
      "tags": ["ãƒ¯ãƒ³ãƒãƒ³ãƒ©ã‚¤ãƒ–"]
    }
  ],
  "meta": {
    "total": 25,
    "page": 1,
    "per_page": 20
  }
}
```

#### å®Œäº†æ¡ä»¶
- âœ… å…¨ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆãŒå‹•ä½œ
- âœ… æ™‚ç³»åˆ—æ¤œç´¢ãŒæ­£ç¢º
- âœ… APIãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ›´æ–°

---

### Task 4.4: ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼APIå®Ÿè£…

**å·¥æ•°**: 1æ—¥
**å„ªå…ˆåº¦**: ğŸŸ¡ Medium

#### ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ

```
GET /api/v1/events/calendar?year=2025&month=12&performer_id=xxx
```

#### ãƒ¬ã‚¹ãƒãƒ³ã‚¹ä¾‹

```json
{
  "year": 2025,
  "month": 12,
  "events_by_date": {
    "2025-12-15": [
      {
        "id": "event_123",
        "title": "Sample Group ãƒ¯ãƒ³ãƒãƒ³ãƒ©ã‚¤ãƒ–",
        "start_time": "18:00",
        "venue": "æ±äº¬ãƒ‰ãƒ¼ãƒ "
      }
    ],
    "2025-12-20": [
      {
        "id": "event_124",
        "title": "æ¡æ‰‹ä¼š",
        "start_time": "13:00",
        "venue": "å¹•å¼µãƒ¡ãƒƒã‚»"
      }
    ]
  },
  "total_events": 8
}
```

#### å®Œäº†æ¡ä»¶
- âœ… ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼å½¢å¼ã§å–å¾—å¯èƒ½
- âœ… iCalendarå½¢å¼ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰

---

## ğŸ“± Phase 5: SNS/å¤–éƒ¨ãƒªãƒ³ã‚¯ç®¡ç†ï¼ˆMonth 2, Week 3ï¼‰

### å®Ÿè£…æœŸé–“
**2-3å–¶æ¥­æ—¥**

---

### Task 5.1: SocialLinksãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ¢ãƒ‡ãƒ«ä½œæˆ

**å·¥æ•°**: 0.5æ—¥
**å„ªå…ˆåº¦**: ğŸŸ¡ High

#### ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ¢ãƒ‡ãƒ«

```go
// internal/domain/idol/social_links.go

type SocialLinks struct {
    twitter   *string
    instagram *string
    tiktok    *string
    youtube   *string
    facebook  *string
    official  *string
    fanClub   *string
}

func NewSocialLinks() *SocialLinks {
    return &SocialLinks{}
}

func (s *SocialLinks) SetTwitter(url string) error {
    if err := validateURL(url); err != nil {
        return err
    }
    if !strings.Contains(url, "twitter.com") && !strings.Contains(url, "x.com") {
        return errors.New("ç„¡åŠ¹ãªTwitter URLã§ã™")
    }
    s.twitter = &url
    return nil
}

func (s *SocialLinks) SetInstagram(url string) error {
    if err := validateURL(url); err != nil {
        return err
    }
    if !strings.Contains(url, "instagram.com") {
        return errors.New("ç„¡åŠ¹ãªInstagram URLã§ã™")
    }
    s.instagram = &url
    return nil
}

// ä»–ã®SNSã‚‚åŒæ§˜

func validateURL(url string) error {
    if url == "" {
        return nil
    }
    if !strings.HasPrefix(url, "http://") && !strings.HasPrefix(url, "https://") {
        return errors.New("URLã¯http://ã¾ãŸã¯https://ã§å§‹ã¾ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™")
    }
    return nil
}
```

#### Idolã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã¸ã®è¿½åŠ 

```go
// internal/domain/idol/idol.go

type Idol struct {
    // ... æ—¢å­˜ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰

    socialLinks *SocialLinks
}

func (i *Idol) SocialLinks() *SocialLinks {
    return i.socialLinks
}

func (i *Idol) UpdateSocialLinks(links *SocialLinks) {
    i.socialLinks = links
    i.updatedAt = time.Now()
}
```

#### å®Œäº†æ¡ä»¶
- âœ… SocialLinksãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ¢ãƒ‡ãƒ«ãŒå®Œæˆ
- âœ… URLãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãŒå‹•ä½œ

---

### Task 5.2: SNSãƒªãƒ³ã‚¯APIå®Ÿè£…

**å·¥æ•°**: 1æ—¥
**å„ªå…ˆåº¦**: ğŸŸ¡ High

#### ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ

```
PUT /api/v1/idols/:id/social-links      # SNSãƒªãƒ³ã‚¯æ›´æ–°
GET /api/v1/idols/:id?include=social_links
```

#### ãƒªã‚¯ã‚¨ã‚¹ãƒˆä¾‹

**PUT /api/v1/idols/:id/social-links**
```json
{
  "twitter": "https://twitter.com/idol_username",
  "instagram": "https://instagram.com/idol_username",
  "tiktok": "https://tiktok.com/@idol_username",
  "youtube": "https://youtube.com/@idol_channel",
  "official_website": "https://idol-official.com",
  "fan_club": "https://fanclub.idol.com"
}
```

#### å®Œäº†æ¡ä»¶
- âœ… SNSãƒªãƒ³ã‚¯æ›´æ–°ãŒå‹•ä½œ
- âœ… include=social_links ã§å–å¾—å¯èƒ½

---

## ğŸ“š Phase 6: OpenAPIä»•æ§˜æ›¸ + ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆï¼ˆMonth 3, Week 1-2ï¼‰

### å®Ÿè£…æœŸé–“
**5-7å–¶æ¥­æ—¥**

---

### Task 6.1: Swaggerã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³è¿½åŠ 

**å·¥æ•°**: 3æ—¥
**å„ªå…ˆåº¦**: ğŸ”´ Critical

#### ãƒ„ãƒ¼ãƒ«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
go get -u github.com/swaggo/swag/cmd/swag
go get -u github.com/swaggo/gin-swagger
go get -u github.com/swaggo/files
```

#### ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ä¾‹

```go
// internal/interface/handlers/idol_handler.go

// ListIdols godoc
// @Summary      ã‚¢ã‚¤ãƒ‰ãƒ«ä¸€è¦§å–å¾—
// @Description  æ¡ä»¶ã‚’æŒ‡å®šã—ã¦ã‚¢ã‚¤ãƒ‰ãƒ«ä¸€è¦§ã‚’å–å¾—
// @Tags         idols
// @Accept       json
// @Produce      json
// @Param        name query string false "åå‰ï¼ˆéƒ¨åˆ†ä¸€è‡´ï¼‰"
// @Param        nationality query string false "å›½ç±"
// @Param        group_id query string false "ã‚°ãƒ«ãƒ¼ãƒ—ID"
// @Param        age_min query int false "æœ€å°å¹´é½¢"
// @Param        age_max query int false "æœ€å¤§å¹´é½¢"
// @Param        sort query string false "ã‚½ãƒ¼ãƒˆé …ç›®" Enums(name, birthdate, created_at)
// @Param        order query string false "ã‚½ãƒ¼ãƒˆé †" Enums(asc, desc)
// @Param        page query int false "ãƒšãƒ¼ã‚¸ç•ªå·"
// @Param        limit query int false "1ãƒšãƒ¼ã‚¸ã‚ãŸã‚Šã®ä»¶æ•°"
// @Success      200 {object} idol.SearchIdolsResult
// @Failure      400 {object} map[string]string
// @Failure      500 {object} map[string]string
// @Router       /api/v1/idols [get]
func (h *IdolHandler) ListIdols(c *gin.Context) {
    // ...
}
```

#### å®Œäº†æ¡ä»¶
- âœ… å…¨ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã«ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³è¿½åŠ 
- âœ… `swag init` ã§ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆç”ŸæˆæˆåŠŸ

---

### Task 6.2: Swagger UIè¨­å®š

**å·¥æ•°**: 1æ—¥
**å„ªå…ˆåº¦**: ğŸ”´ Critical

#### å®Ÿè£…

```go
// cmd/api/main.go

import (
    swaggerFiles "github.com/swaggo/files"
    ginSwagger "github.com/swaggo/gin-swagger"

    _ "github.com/kuro48/idol-api/docs" // swag init ã§ç”Ÿæˆã•ã‚Œã‚‹ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
)

// @title           Idol API
// @version         1.0
// @description     åŒ…æ‹¬çš„ã‚¢ã‚¤ãƒ‰ãƒ«æƒ…å ±API
// @termsOfService  http://swagger.io/terms/

// @contact.name   API Support
// @contact.email  support@example.com

// @license.name  MIT
// @license.url   https://opensource.org/licenses/MIT

// @host      localhost:8081
// @BasePath  /api/v1

func main() {
    // ... æ—¢å­˜ã®è¨­å®š

    // Swagger UI
    router.GET("/swagger/*any", ginSwagger.WrapHandler(swaggerFiles.Handler))

    // ... ã‚µãƒ¼ãƒãƒ¼èµ·å‹•
}
```

#### ã‚¢ã‚¯ã‚»ã‚¹

```
http://localhost:8081/swagger/index.html
```

#### å®Œäº†æ¡ä»¶
- âœ… Swagger UIãŒæ­£å¸¸è¡¨ç¤º
- âœ… å…¨ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆãŒãƒ†ã‚¹ãƒˆå¯èƒ½

---

### Task 6.3: APIãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä½œæˆ

**å·¥æ•°**: 2æ—¥
**å„ªå…ˆåº¦**: ğŸŸ¡ Medium

#### ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆå†…å®¹

1. **Getting Started**
   - èªè¨¼æ–¹æ³•ï¼ˆå°†æ¥å®Ÿè£…ï¼‰
   - ãƒ¬ãƒ¼ãƒˆåˆ¶é™
   - ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°

2. **ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆä¸€è¦§**
   - ã‚¢ã‚¤ãƒ‰ãƒ«æ¤œç´¢
   - ã‚¤ãƒ™ãƒ³ãƒˆæ¤œç´¢
   - äº‹å‹™æ‰€æƒ…å ±

3. **ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«**
   - Idol
   - Group
   - Agency
   - Event
   - Venue

4. **ä½¿ç”¨ä¾‹**
   - JavaScript/TypeScriptã‚µãƒ³ãƒ—ãƒ«
   - Pythonã‚µãƒ³ãƒ—ãƒ«
   - cURLã‚³ãƒãƒ³ãƒ‰

#### å®Œäº†æ¡ä»¶
- âœ… ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚µã‚¤ãƒˆå…¬é–‹
- âœ… ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰å‹•ä½œç¢ºèª

---

## ğŸ·ï¸ Phase 7: ã‚¿ã‚°ãƒ»ã‚«ãƒ†ã‚´ãƒªã‚·ã‚¹ãƒ†ãƒ ï¼ˆMonth 3, Week 3ï¼‰

### å®Ÿè£…æœŸé–“
**3-4å–¶æ¥­æ—¥**

---

### Task 7.1: Tagãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ¢ãƒ‡ãƒ«ä½œæˆ

**å·¥æ•°**: 1æ—¥
**å„ªå…ˆåº¦**: ğŸŸ¢ Low

#### ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ¢ãƒ‡ãƒ«

```go
// internal/domain/tag/tag.go

type Tag struct {
    id          TagID
    name        TagName
    category    TagCategory  // genre, region, style, etc.
    description *string
    createdAt   time.Time
}

type TagCategory struct {
    value string
}

const (
    TagCategoryGenre  = "genre"   // K-POP, J-POP, ã‚¢ã‚¤ãƒ‰ãƒ«ãƒãƒƒãƒ—
    TagCategoryRegion = "region"  // é–¢æ±ã€é–¢è¥¿ã€éŸ“å›½
    TagCategoryStyle  = "style"   // ãƒ€ãƒ³ã‚¹ã€ãƒœãƒ¼ã‚«ãƒ«ã€ãƒ©ãƒƒãƒ—
    TagCategoryOther  = "other"
)
```

#### Idol/Group/Eventã¸ã®ã‚¿ã‚°ä»˜ã‘

```go
// internal/domain/idol/idol.go

type Idol struct {
    // ... æ—¢å­˜ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰

    tags []tag.TagID
}

func (i *Idol) AddTag(tagID tag.TagID) error {
    // é‡è¤‡ãƒã‚§ãƒƒã‚¯
    for _, t := range i.tags {
        if t.Value() == tagID.Value() {
            return errors.New("æ—¢ã«è¿½åŠ ã•ã‚Œã¦ã„ã¾ã™")
        }
    }
    i.tags = append(i.tags, tagID)
    i.updatedAt = time.Now()
    return nil
}

func (i *Idol) RemoveTag(tagID tag.TagID) {
    for idx, t := range i.tags {
        if t.Value() == tagID.Value() {
            i.tags = append(i.tags[:idx], i.tags[idx+1:]...)
            break
        }
    }
    i.updatedAt = time.Now()
}
```

#### å®Œäº†æ¡ä»¶
- âœ… Tagãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ¢ãƒ‡ãƒ«ãŒå®Œæˆ
- âœ… ã‚¢ã‚¤ãƒ‰ãƒ«/ã‚°ãƒ«ãƒ¼ãƒ—/ã‚¤ãƒ™ãƒ³ãƒˆã«ã‚¿ã‚°ä»˜ã‘å¯èƒ½

---

### Task 7.2: ã‚¿ã‚°æ¤œç´¢APIå®Ÿè£…

**å·¥æ•°**: 1æ—¥
**å„ªå…ˆåº¦**: ğŸŸ¢ Low

#### ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ

```
GET /api/v1/idols?tags=K-POP,ãƒ€ãƒ³ã‚¹
GET /api/v1/events?tags=ãƒ¯ãƒ³ãƒãƒ³ãƒ©ã‚¤ãƒ–

POST   /api/v1/tags        # ã‚¿ã‚°ä½œæˆ
GET    /api/v1/tags        # ã‚¿ã‚°ä¸€è¦§
```

#### å®Œäº†æ¡ä»¶
- âœ… ã‚¿ã‚°æ¤œç´¢ãŒå‹•ä½œ
- âœ… ã‚¿ã‚°ç®¡ç†APIå®Œæˆ

---

## âš¡ Phase 8: ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–ï¼ˆMonth 3, Week 4ï¼‰

### å®Ÿè£…æœŸé–“
**3-5å–¶æ¥­æ—¥**

---

### Task 8.1: MongoDBã‚¯ã‚¨ãƒªæœ€é©åŒ–

**å·¥æ•°**: 2æ—¥
**å„ªå…ˆåº¦**: ğŸŸ¡ High

#### å®Ÿè£…å†…å®¹

1. **è¤‡åˆã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹è¿½åŠ **
```go
// è¤‡åˆã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã®ä½œæˆ
indexes := []mongo.IndexModel{
    {
        Keys: bson.D{
            {Key: "nationality", Value: 1},
            {Key: "birthdate", Value: 1},
            {Key: "created_at", Value: -1},
        },
    },
    {
        Keys: bson.D{
            {Key: "agency_id", Value: 1},
            {Key: "created_at", Value: -1},
        },
    },
}
```

2. **ã‚¯ã‚¨ãƒªãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒªãƒ³ã‚°**
   - ã‚¹ãƒ­ãƒ¼ã‚¯ã‚¨ãƒªã®ç‰¹å®š
   - explain() ã§ã®å®Ÿè¡Œè¨ˆç”»ç¢ºèª

3. **é›†è¨ˆãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³æœ€é©åŒ–**

#### å®Œäº†æ¡ä»¶
- âœ… æ¤œç´¢ãƒ¬ã‚¹ãƒãƒ³ã‚¹æ™‚é–“ < 200ms
- âœ… ã‚¹ãƒ­ãƒ¼ã‚¯ã‚¨ãƒªè§£æ¶ˆ

---

### Task 8.2: ã‚­ãƒ£ãƒƒã‚·ãƒ¥å®Ÿè£…

**å·¥æ•°**: 2æ—¥
**å„ªå…ˆåº¦**: ğŸŸ¢ Mediumï¼ˆå°†æ¥å®Ÿè£…ï¼‰

#### æ¦‚è¦

Rediså°å…¥ã«ã‚ˆã‚‹é »ç¹ã«ã‚¢ã‚¯ã‚»ã‚¹ã•ã‚Œã‚‹ãƒ‡ãƒ¼ã‚¿ã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥

**ç¾æ™‚ç‚¹ã§ã¯å®Ÿè£…ã›ãš**ã€ãƒˆãƒ©ãƒ•ã‚£ãƒƒã‚¯å¢—åŠ æ™‚ã«å¯¾å¿œ

---

## ğŸ§ª ãƒ†ã‚¹ãƒˆè¨ˆç”»

### ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ
- ãƒ‰ãƒ¡ã‚¤ãƒ³å±¤: å…¨å€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã€ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£
- ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å±¤: ApplicationService
- **ã‚«ãƒãƒ¬ãƒƒã‚¸ç›®æ¨™**: 80%ä»¥ä¸Š

### çµ±åˆãƒ†ã‚¹ãƒˆ
- ãƒªãƒã‚¸ãƒˆãƒªå±¤: MongoDBãƒ†ã‚¹ãƒˆã‚³ãƒ³ãƒ†ãƒŠä½¿ç”¨
- APIå±¤: httptestä½¿ç”¨

### E2Eãƒ†ã‚¹ãƒˆ
- ä¸»è¦ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã®ã‚·ãƒŠãƒªã‚ªãƒ†ã‚¹ãƒˆ
- æ¤œç´¢ãƒ•ãƒ­ãƒ¼
- ã‚¤ãƒ™ãƒ³ãƒˆä½œæˆã€œæ¤œç´¢ãƒ•ãƒ­ãƒ¼

---

## ğŸ“Š ãƒã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³

### **Milestone 1 (Month 1çµ‚äº†æ™‚)**
**æœŸé™**: 2025å¹´12æœˆ31æ—¥

**æˆæœç‰©:**
- âœ… æŸ”è»Ÿãªæ¤œç´¢ãƒ»ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°API
- âœ… ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè£…
- âœ… äº‹å‹™æ‰€ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£å®Œæˆ
- âœ… é–¢é€£ãƒ‡ãƒ¼ã‚¿å–å¾—ï¼ˆinclude ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ï¼‰

**æ¤œè¨¼åŸºæº–:**
- è¤‡æ•°æ¡ä»¶ã§ã®æ¤œç´¢ãŒæ­£å¸¸å‹•ä½œ
- ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³ãŒæ­£ç¢º
- ã‚¢ã‚¤ãƒ‰ãƒ«-äº‹å‹™æ‰€ãŒé–¢é€£ä»˜ã‘ã‚‰ã‚Œã‚‹

---

### **Milestone 2 (Month 2çµ‚äº†æ™‚)**
**æœŸé™**: 2026å¹´1æœˆ31æ—¥

**æˆæœç‰©:**
- âœ… ã‚¤ãƒ™ãƒ³ãƒˆ/ãƒ©ã‚¤ãƒ–ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£å®Œæˆ
- âœ… ä¼šå ´ç®¡ç†æ©Ÿèƒ½
- âœ… æ™‚ç³»åˆ—æ¤œç´¢ãƒ»ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
- âœ… SNS/å¤–éƒ¨ãƒªãƒ³ã‚¯ç®¡ç†

**æ¤œè¨¼åŸºæº–:**
- ã‚¤ãƒ™ãƒ³ãƒˆæ¤œç´¢ãŒæ­£å¸¸å‹•ä½œ
- ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼APIãŒæ©Ÿèƒ½
- SNSãƒªãƒ³ã‚¯ãŒæ­£ã—ãè¡¨ç¤º

---

### **Milestone 3 (Month 3çµ‚äº†æ™‚)**
**æœŸé™**: 2026å¹´2æœˆ28æ—¥

**æˆæœç‰©:**
- âœ… OpenAPIä»•æ§˜æ›¸ + Swagger UI
- âœ… ã‚¿ã‚°ãƒ»ã‚«ãƒ†ã‚´ãƒªã‚·ã‚¹ãƒ†ãƒ 
- âœ… ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–
- âœ… ç·åˆãƒ†ã‚¹ãƒˆå®Œäº†

**æ¤œè¨¼åŸºæº–:**
- Swagger UIã§ã®å…¨ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆãƒ†ã‚¹ãƒˆæˆåŠŸ
- æ¤œç´¢ãƒ¬ã‚¹ãƒãƒ³ã‚¹ < 200ms
- ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸ 80%ä»¥ä¸Š

---

## ğŸ¯ å„ªå…ˆåº¦ãƒãƒˆãƒªã‚¯ã‚¹

### ğŸ”´ P0 (æœ€å„ªå…ˆ)
- Phase 1: æ¤œç´¢ãƒ»ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°åŸºç›¤
- Phase 2: ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³
- Phase 3: äº‹å‹™æ‰€ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£
- Phase 4: ã‚¤ãƒ™ãƒ³ãƒˆã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£
- Phase 6: OpenAPIä»•æ§˜æ›¸

### ğŸŸ¡ P1 (é«˜å„ªå…ˆåº¦)
- Phase 4: ä¼šå ´ç®¡ç†
- Phase 5: SNSãƒªãƒ³ã‚¯ç®¡ç†
- Phase 6: APIãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
- Phase 8: ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–

### ğŸŸ¢ P2 (ä¸­å„ªå…ˆåº¦)
- Phase 7: ã‚¿ã‚°ãƒ»ã‚«ãƒ†ã‚´ãƒªã‚·ã‚¹ãƒ†ãƒ 
- Phase 8: ã‚­ãƒ£ãƒƒã‚·ãƒ¥å®Ÿè£…

---

## ğŸš€ æ¬¡ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³

### Week 1 é–‹å§‹å‰ï¼ˆæº–å‚™ï¼‰
1. âœ… å®Ÿè£…è¨ˆç”»ãƒ¬ãƒ“ãƒ¥ãƒ¼
2. âœ… é–‹ç™ºç’°å¢ƒç¢ºèª
3. âœ… Gitãƒ–ãƒ©ãƒ³ãƒæˆ¦ç•¥æ±ºå®š

### Week 1 Day 1
1. **Phase 1 é–‹å§‹**: æ¤œç´¢ãƒ»ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°åŸºç›¤
   - Task 1.1: ã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿å‡¦ç†åŸºç›¤
   - ãƒªãƒã‚¸ãƒˆãƒªã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹æ‹¡å¼µ

### æ¯é€±é‡‘æ›œæ—¥
- é€±æ¬¡ãƒ¬ãƒ“ãƒ¥ãƒ¼
- é€²æ—ç¢ºèª
- æ¬¡é€±è¨ˆç”»èª¿æ•´

---

## ğŸ“ è£œè¶³è³‡æ–™

### æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯
- **è¨€èª**: Go 1.24.4
- **Webãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯**: Gin
- **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹**: MongoDB v2
- **ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ**: Swagger/OpenAPI 3.0
- **ãƒ†ã‚¹ãƒˆ**: testify, httptest

### é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
- README.md - ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦
- docs/ddd-architecture-guide.md - DDDã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã‚¬ã‚¤ãƒ‰
- docs/implementation-plan.md - Phase 1 MVPå®Ÿè£…è¨ˆç”»ï¼ˆæ—§ï¼‰

### å‚è€ƒãƒªãƒ³ã‚¯
- [Gin Framework](https://gin-gonic.com/)
- [Swaggo](https://github.com/swaggo/swag)
- [MongoDB Go Driver](https://www.mongodb.com/docs/drivers/go/current/)

---

**æœ€çµ‚æ›´æ–°**: 2025-11-26
